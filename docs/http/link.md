### 三次握手

其实是tcp的三次握手

第一次握手，终端发送一个数据包到server端，syn=1 seq=x

第二次，server端收到请求报文，并响应一个请求，syn=x+1,ack=1,seq=y,发送到终端

第三次握手，终端收到server的包，检查syn是否为x+1,ack是否为1，然后发送一个数据包到server端，此时ack=y+1，server端收到数据包后检验通过，此时连接完成，可以开始进行数据传输

为什么需要3次，不确定客户端是否收到了消息，如果不确认会使得服务端一直在等待客户端响应，影响了开销

### 四次挥手

1. 客户端发送一个fin标记包，告诉服务端需要关闭连接，但是可以接受数据，客户端fin-wait阶段
2. 服务端收到客户端的请求后，还没有准备好关闭，发送一个ack确认包到客户端表示自己已经收到，并进入close-wait,一直等待关闭，客户端在fin-wait2阶段
3. 服务端转变好关闭连接是，发送fin包告诉客户端准备要关闭了，发送完成后，等待客户端确认，服务端在last-ack状态
4. 客户端收到服务端的释放报文后，发出确认报文，然后进入time-wait状态，服务端收到客户端的报文后，进入close状态，客户端在2ms时间后也进入close状态

为什么需要4次

如果是3次挥手，可能会因为服务端数据还没有发完数据就关闭，导致数据丢失

#### DNS解析过程

1. 检查浏览器缓存中是否缓存过该域名对应的ip地址
2. 如果浏览器缓存中没有找到ip，继续查找本机系统是否缓存过ip
3. 想本地域名解析服务系统发起域名解析请求
4. 向根域名服务器发起域名解析请求
5. 根域名服务器返回gTLD域名解析服务器地址
6. 向gTLD服务器发起解析请求
7. gTLD服务器接收请求并返回Name Server服务器
8. Name Server服务器返回IP地址给本地服务器
9. 本地域名服务器缓存解析结果
10. 返回解析结果给用户

